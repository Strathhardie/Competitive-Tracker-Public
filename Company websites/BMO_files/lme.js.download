var bmo_lme=function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=56)}([function(e,n,t){"use strict";function o(){var e=Array.prototype.slice.call(arguments);console&&"function"==typeof console.log&&console.log.apply(console,e)}function r(e){return e?Array.isArray(e)?e:[e]:[]}function i(e){return e?Array.prototype.slice.call(e):[]}function a(e,n){if(e=r(e),n===s.ALL)return!0;if(n===s.NONE)return!1;if(0===e.length)return!1;var t=window[u.WINDOW_VARIABLE];if(!1===t||t===s.NONE)return!1;if(!0===t||t===s.ALL)return!0;var o=c();return e.some(function(e){return o.indexOf(e)>=0})}function l(e){if(!e)return[];try{var n=e.getItem(u.STORAGE_KEY);return r((n=JSON.parse(n))||[])}catch(e){return[]}}function c(){var e,n=l(window.sessionStorage),t=l(window.localStorage),o=(e=window.location.search.slice(1),[]||e),i=r(window[u.WINDOW_VARIABLE]||[]);return[].concat(n,t,o,i)}["assert","clear","count","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","show","table","time","timeEnd","timeStamp","timeline","timelineEnd","trace","warn"].forEach(function(e){console[e]=console[e]||o});var s=Object.freeze({NONE:0,ALL:1}),u=Object.freeze({STORAGE_KEY:"__debug__enabled__",QUERY_KEY:"debugmodules",WINDOW_VARIABLE:"debugger"});function g(e){var n;"boolean"===e&&(n=e?s.ALL:s.NONE,e=void 0),e=r(e);var t={};return t.warn=t.w=function(){if(a(e,n)){var t=i(arguments);console&&"function"==typeof console.warn&&console.warn.apply(console,t)}},t.trace=t.tr=function(){if(a(e,n)){var t=i(arguments);console&&"function"==typeof console.trace&&console.trace.apply(console,t)}},t.timelineEnd=function(){if(a(e,n)){var t=i(arguments);console&&"function"==typeof console.timelineEnd&&console.timelineEnd.apply(console,t)}},t.timeline=function(){if(a(e,n)){var t=i(arguments);console&&"function"==typeof console.timeline&&console.timeline.apply(console,t)}},t.timeStamp=function(){if(a(e,n)){var t=i(arguments);console&&"function"==typeof console.timeStamp&&console.timeStamp.apply(console,t)}},t.timeEnd=t.te=function(){if(a(e,n)){var t=i(arguments);console&&"function"==typeof console.timeEnd&&console.timeEnd.apply(console,t)}},t.time=t.t=function(){if(a(e,n)){var t=i(arguments);console&&"function"==typeof console.time&&console.time.apply(console,t)}},t.table=t.ta=function(){if(a(e,n)){var t=i(arguments);console&&"function"==typeof console.table&&console.table.apply(console,t)}},t.show=t.s=function(){if(a(e,n)){var t=i(arguments);console&&"function"==typeof console.show&&console.show.apply(console,t)}},t.profileEnd=t.pe=function(){if(a(e,n)){var t=i(arguments);console&&"function"==typeof console.profileEnd&&console.profileEnd.apply(console,t)}},t.profile=t.p=function(){if(a(e,n)){var t=i(arguments);console&&"function"==typeof console.profile&&console.profile.apply(console,t)}},t.markTimeline=function(){if(a(e,n)){var t=i(arguments);console&&"function"==typeof console.markTimeline&&console.markTimeline.apply(console,t)}},t.info=t.i=function(){if(a(e,n)){var t=i(arguments);console&&"function"==typeof console.info&&console.info.apply(console,t)}},t.groupEnd=t.ge=function(){if(a(e,n)){var t=i(arguments);console&&"function"==typeof console.groupEnd&&console.groupEnd.apply(console,t)}},t.groupCollapsed=function(){if(a(e,n)){var t=i(arguments);console&&"function"==typeof console.groupCollapsed&&console.groupCollapsed.apply(console,t)}},t.group=t.g=function(){if(a(e,n)){var t=i(arguments);console&&"function"==typeof console.group&&console.group.apply(console,t)}},t.error=t.e=function(){if(a(e,n)){var t=i(arguments);console&&"function"==typeof console.error&&console.error.apply(console,t)}},t.dirxml=function(){if(a(e,n)){var t=i(arguments);console&&"function"==typeof console.dirxml&&console.dirxml.apply(console,t)}},t.dir=function(){if(a(e,n)){var t=i(arguments);console&&"function"==typeof console.dir&&console.dir.apply(console,t)}},t.debug=t.d=function(){if(a(e,n)){var t=i(arguments);console&&"function"==typeof console.debug&&console.debug.apply(console,t)}},t.count=t.co=function(){if(a(e,n)){var t=i(arguments);console&&"function"==typeof console.count&&console.count.apply(console,t)}},t.clear=t.c=function(){if(a(e,n)){var t=i(arguments);console&&"function"==typeof console.clear&&console.clear.apply(console,t)}},t.assert=t.a=function(){if(a(e,n)){var t=i(arguments);console&&"function"==typeof console.assert&&console.assert.apply(console,t)}},t.log=t.l=function(){if(a(e,n)){var t=i(arguments);console&&"function"==typeof console.log&&console.log.apply(console,t)}},t.getEnabledModules=c,t.FLAGS=s,t.CONST=u,t}g.set=function(e){Array.isArray(e)||(e=Array.prototype.concat.call([],arguments)),window[u.WINDOW_VARIABLE]=e},e.exports=g},function(e,n,t){"use strict";var o=t(45),r=t(46),i=(o.parse(window.location.search.substr(1)),t(13).getLocalStorageItem),a=t(95),l=(a.domainPatterns,{prod:{apiTimeout:800,renderDefaultTimeout:1600},notProd:{apiTimeout:1e4,renderDefaultTimeout:15e3}}),c=(0,a.getEnvType)(),s=Number(i("__lme__api__timeout__")),u=Number(i("__lme__render__default__timeout__")),g=s||l[c].apiTimeout,f=u||l[c].renderDefaultTimeout,d=window.location.hostname.indexOf("bmo.com")>=0?"bmo.com":window.location.hostname;e.exports={apiBase:"/api/banking/offer/v1/",dataKeys:r,localStorageKey:"lmeLandingPageTracking",localStorageApiBaseOverrideKey:"__lme__api__base__",localStorageApiTimeoutOverrideKey:"__lme__api__timeout__",localStorageRenderDefaultOverrideKey:"__lme__render__default__timeout__",eventNamespace:"bmo.lme",sessionLength:57e4,landingPageTrackerLifespan:18e5,apiTimeout:g,renderDefaultTimeout:f,cookieDomain:d,cookieSecure:!1,segmentCookieMaxLength:100}},function(e,n,t){"use strict";var o=t(1),r=t(21),i=$("body"),a=o.eventNamespace,l=["fulfilOrder","lmeReady","lmeRegionRender","lmeRegionRenderComplete","lmeRegionRenderDefault","lmeRegionRenderIncomplete","lmeRegionRenderNoTarget","noRenderRegions","requestOffers","segmentChanged","sessionExtend"];Object.keys(r).forEach(function(e){l.push(r[e]+"Clicked"),l.push(r[e]+"Render"),l.push(r[e]+"RenderComplete"),l.push(r[e]+"RenderDefault"),l.push(r[e]+"RenderIncomplete"),l.push(r[e]+"RenderNoTarget")});e.exports={events:l,trigger:function(e,n){i.trigger(e+"."+a,n)},listen:function(e,n){arguments.length>2&&void 0!==arguments[2]&&arguments[2]?i.one(e+"."+a,n):i.on(e+"."+a,n)}}},function(e,n,t){var o=t(39)("wks"),r=t(24),i=t(7).Symbol,a="function"==typeof i;(e.exports=function(e){return o[e]||(o[e]=a&&i[e]||(a?i:r)("Symbol."+e))}).store=o},function(e,n,t){"use strict";t(0)("lme");var o=t(96),r=t(1),i={secure:r.cookieSecure,domain:r.cookieDomain,path:"/",end:1/0},a={get:function(e){return o.getItem(e)},set:function(e,n,t){var r=t=Object.assign({},i,t),a=r.secure,l=r.domain,c=r.path,s=r.end;return o.setItem(e,n,s,c,l,a)},remove:function(e,n,t){return o.removeItem(e,n,t)},has:function(e){return o.hasItem(e)},keys:function(){return o.keys()}};e.exports=a},function(e,n){var t=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=t)},function(e,n,t){"use strict";var o=t(0)("lme"),r=t(47).getCampaignId,i=t(33),a=t(48),l=t(14).getCurrentBrowserSessionId,c=t(1),s=t(4),u=t(34).trailingSlashIt,g=t(13).getLocalStorageItem,f={offers:{customer:{url:"offers/customer",method:"GET",headers:{accept:"application/json","X-CHANNEL-NAME":"NET","X-LME-CHANNEL-ID":void 0,"X-LME-SESSION-CHANNEL-ID":void 0,"X-EXT-CAMP-ID":void 0,"X-BROWSER-SESSION-ID":void 0},params:{idType:"DAR",maxOffers:1,lang:void 0,intPoint:void 0,currPage:void 0,prevPage:void 0,lastSearched:void 0},cookies:["dar","aam_lme"]},acknowledge:{url:"offers/acknowledge",method:"POST",headers:{accept:"application/json","Content-Type":"application/json","X-CHANNEL-NAME":"NET","X-LME-CHANNEL-ID":void 0,"X-LME-SESSION-CHANNEL-ID":void 0,"X-BROWSER-SESSION-ID":void 0},params:{idType:"DAR",lang:void 0,currPage:void 0,prevPage:void 0,lastSearched:void 0}},fulfil:{url:"offers/fulfil",method:"PUT",headers:{accept:void 0,"X-CHANNEL-NAME":"NET","X-LME-CHANNEL-ID":void 0,"X-LME-SESSION-CHANNEL-ID":void 0,"X-BROWSER-SESSION-ID":void 0},params:{idType:"DAR",lang:void 0,currPage:void 0,prevPage:void 0,lastSearched:void 0},settingsOverrides:{timeout:8e4}},segmentUpdate:{url:"offers/segmentUpdate",method:"PUT",headers:{accept:void 0,"X-CHANNEL-NAME":"NET","X-LME-CHANNEL-ID":void 0,"X-LME-SESSION-CHANNEL-ID":void 0,"X-BROWSER-SESSION-ID":void 0},params:{idType:"DAR",lang:void 0,currPage:void 0,prevPage:void 0,lastSearched:void 0},cookies:["dar","aam_lme"]}},session:{end:{headers:{accept:void 0,"X-CHANNEL-NAME":"NET","X-LME-CHANNEL-ID":void 0,"X-LME-SESSION-CHANNEL-ID":void 0,"X-BROWSER-SESSION-ID":void 0},params:{idType:"DAR",lang:void 0,intPoint:void 0,currPage:void 0,prevPage:void 0,lastSearched:void 0},url:"session/end",method:"DELETE"}}};e.exports={endpoints:f,getEndpointURL:function(e){var n=g(c.localStorageApiBaseOverrideKey,!1);return""+(n?u(n):c.apiBase)+e.url},getEndpointHeaders:function(e){o.log("function 'getEndpointHeaders' running");var n=i(),t={},a={accept:"application/json","Content-Type":"application/json","X-LME-CHANNEL-ID":n,"X-LME-SESSION-CHANNEL-ID":n,"X-BROWSER-SESSION-ID":l(),"X-CHANNEL-NAME":"NET","X-EXT-CAMP-ID":r()};Object.keys(e.headers||{}).forEach(function(e){t[e]=a[e]}),o.log("values before merging defaults and passed props"),o.log({defaultValues:t,passedInValues:e.headers});var c=$.extend({},t,e.headers);return o.log("result after merging, which will now be returned:"),o.log({headers:c}),c},getEndpointParams:function(e){o.log("function 'getEndpointParams' running");var n={},t=i(),r={currPage:a(),intPoint:t&&{WEBHOME:"WEBHome_IP",WEBSI:"WEBSignIn_IP",WEBSO:"WEBSignOut_IP"}[t]||"WEBHome_IP",idType:"DAR",lang:$("html").attr("lang"),lastSearched:s.get("ev8")||void 0,prevPage:void 0};Object.keys(e.params||{}).forEach(function(e){n[e]=r[e]});var l=$.extend({},n,e.params);return o.log({params:l}),l}}},function(e,n){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},function(e,n,t){"use strict";var o=t(0)("lme"),r=t(50);e.exports=function(e){o.log('In Function "isRenderOverridden":');e.$target;var n=e.offer,t=e.req;return t.override&&t.override.length?t.override.some(function(e){var t=r(e),o=n.solutionCode;return t?o.match(t):e.toLowerCase()===o.toLowerCase()}):(o.log("No Overrides set"),!1)}},function(e,n,t){"use strict";var o=t(0)("lme"),r=t(1),i=t(100),a=t(2).trigger,l=r.apiTimeout,c=t(6),s=(c.endpoints,c.getEndpointURL),u=c.getEndpointHeaders,g=c.getEndpointParams,f=t(4);e.exports=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments[2],c=arguments[3],d=arguments[4];if(o.log('In function "callApi" for endpoint:',e),!f.get("dar"))return!1;var m=g(e),p=s(e),h=u(e),v=e.settingsOverrides||{};if(!m.currPage)return o.log("There is no current page set so no ajax call"),!1;t=t||!1,c=c||t,d=d||!1,"GET"===e.method?n=$.extend({},m,n):(n=JSON.stringify(n),p=p+"?"+$.param(m));var y=$.extend({url:p,xhrFields:{withCredentials:!0},timeout:l,contentType:"application/json; charset=UTF-8",type:e.method,dataType:"text",data:n,headers:h},v);o.log("checking cookie length of:");var k=encodeURIComponent(f.get("aam_lme"));if(o.log(k),k.length>r.segmentCookieMaxLength&&f.set("aam_lme",i(decodeURIComponent(k),r.segmentCookieMaxLength)),!1===t)o.log('no callback provided for "done" method no ajax call being made');else if(o.log("making ajax call with data:",y),$.ajax(y).done(function(){a("sessionExtend")}).done(t).fail(c).always(d),e.noOp){o.log("running no op loop for time for network call");for(var b=(new Date).getTime(),w=b+e.noOp;b<w;)b=(new Date).getTime()}}},function(e,n,t){var o=t(7),r=t(5),i=t(11),a=t(37),l=t(25),c=function(e,n,t){var s,u,g,f,d=e&c.F,m=e&c.G,p=e&c.S,h=e&c.P,v=e&c.B,y=m?o:p?o[n]||(o[n]={}):(o[n]||{}).prototype,k=m?r:r[n]||(r[n]={}),b=k.prototype||(k.prototype={});for(s in m&&(t=n),t)g=((u=!d&&y&&void 0!==y[s])?y:t)[s],f=v&&u?l(g,o):h&&"function"==typeof g?l(Function.call,g):g,y&&a(y,s,g,e&c.U),k[s]!=g&&i(k,s,f),h&&b[s]!=g&&(b[s]=g)};o.core=r,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,n,t){var o=t(16),r=t(23);e.exports=t(19)?function(e,n,t){return o.f(e,n,r(1,t))}:function(e,n,t){return e[n]=t,e}},function(e,n){var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},function(e,n,t){"use strict";var o=t(0)("lme"),r=window.localStorage,i=t(46),a=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];o.log('in function "getLocalStorageItem"');var t=r.getItem(e),i=t;if(n)try{i=JSON.parse(t)}catch(e){o.error(e),i=!1}return i},l=function(e,n){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return o.log('in function "setLocalStorageItem"'),t&&"string"!=typeof n&&(n=JSON.stringify(n)),o.log('setting key: "'+e+'" to: ',n),r.setItem(e,n),n};e.exports={getLocalStorageItem:a,setLocalStorageItem:l,addTrackerToStorageArray:function(e,n){o.log('in function "addTrackerToStorageArray"'),o.log(e),o.log(n);var t=a(n,!0),r=t||[],c=e.data(i.landingPageTracking);if(o.log("getting localstorage array"),o.log(t),o.log('getting landing page tracking info from jquery data in key "'+i.landingPageTracking+'": '),o.log(c),!c)return!1;var s=Array.isArray(r)?[].concat(function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}(r)):[];return o.log("array to add tracker to:"),o.log(JSON.stringify(s)),s.push(c),o.log("array after adding tracker:"),o.log(JSON.stringify(s)),o.log("add back to local storage as stringified JSON"),o.log(JSON.stringify(s)),l(n,s),s}}},function(e,n,t){"use strict";var o=t(0)("lme"),r=t(1).sessionLength,i=t(4),a=function(e,n){o.log("function 'doSessionExtend' running");var t=(new Date).getTime();i.set("lme_session",t)},l=function(){var e=(new Date).getTime();return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25,t="";if((e=String(e)).length>=n)return e;for(var o=0;o<=n-e.length;o++)t+="x";return e+t}(e+"_").replace(/x/g,function(e){return Math.floor(16*Math.random()).toString(16)})};e.exports={getCurrentBrowserSessionId:function(){o.log("function 'getCurrentBrowserSessionId' running");var e=i.get("lme_session"),n=(new Date).getTime(),t=(void 0===e?0:parseInt(e))<=n-r,c=i.get("browserSessionId");return o.log("current value "+(t?"is":"is not")+" expired"),c&&!t?c:function(){o.log("function 'setNewBrowserSessionId' running");var e=l();return a(),i.set("browserSessionId",e),e}()},doSessionExtend:a}},function(e,n,t){"use strict";var o=t(0)("lme"),r=t(1),i=r.landingPageTrackerLifespan;r.dataKeys,t(14).getCurrentBrowserSessionId;e.exports=function(e,n){o.log('in function "prepareLandingPageTracker" with:'),o.log({cta:e,renderData:n});var t={location:e.url,channelId:n.channelId,browserSessionId:n.browserSessionId,offerId:n.offerId,trackingCode:e.landingPageTrackingCode,textFilters:e.landingPageTextFilters||"",urlFilters:e.landingPageUrlFilters||"",cssFilter:e.landingPageCssFilter||"",expires:(new Date).getTime()+i};return o.log("returning tracker data:"),o.log(t),t}},function(e,n,t){var o=t(17),r=t(59),i=t(60),a=Object.defineProperty;n.f=t(19)?Object.defineProperty:function(e,n,t){if(o(e),n=i(n,!0),o(t),r)try{return a(e,n,t)}catch(e){}if("get"in t||"set"in t)throw TypeError("Accessors not supported!");return"value"in t&&(e[n]=t.value),e}},function(e,n,t){var o=t(18);e.exports=function(e){if(!o(e))throw TypeError(e+" is not an object!");return e}},function(e,n){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,n,t){e.exports=!t(22)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,n,t){var o=t(28);e.exports=function(e){return Object(o(e))}},function(e,n,t){"use strict";e.exports={banner:"banner","logout-big-ad":"logoutBigAd","logout-small-ad":"logoutSmallAd","signin-ad":"signinAd","weighted-banner":"weightedBanner"}},function(e,n){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,n){e.exports=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}}},function(e,n){var t=0,o=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+o).toString(36))}},function(e,n,t){var o=t(61);e.exports=function(e,n,t){if(o(e),void 0===n)return e;switch(t){case 1:return function(t){return e.call(n,t)};case 2:return function(t,o){return e.call(n,t,o)};case 3:return function(t,o,r){return e.call(n,t,o,r)}}return function(){return e.apply(n,arguments)}}},function(e,n,t){var o=t(27);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==o(e)?e.split(""):Object(e)}},function(e,n){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},function(e,n){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,n,t){var o=t(30),r=Math.min;e.exports=function(e){return e>0?r(o(e),9007199254740991):0}},function(e,n){var t=Math.ceil,o=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?o:t)(e)}},function(e,n,t){var o=t(39)("keys"),r=t(24);e.exports=function(e){return o[e]||(o[e]=r(e))}},function(e,n){e.exports={}},function(e,n,t){"use strict";var o=t(0)("lme");e.exports=function(e){return o.log("function 'getLmeChannelID' running"),$("[data-lme-channel-id]").first().data("lme-channel-id")||"WEBHome"}},function(e,n,t){"use strict";var o=function e(n){var t=n.charAt(n.length-1);return"/"===t||"\\"===t?e(n.slice(0,-1)):n};e.exports={trailingSlashIt:function(e){return o(e)+"/"},unTrailingSlashIt:o}},function(e,n,t){"use strict";var o=t(0)("lme"),r=t(1).dataKeys,i=r.linkHijackComplete,a=r.linkHijackLocation,l=r.linkHijacking,c=t(55),s=c.getTrackers,u=c.getTrackedIndicies,g=c.getElementMatchedIndicies,f=function(e){if(o.log("function 'doLinkHijacking' running"),!0===e.data(i))return!0;if(o.log("link not already hijacked"),e.is("a")){o.log("Link is an anchor"),o.log("Checking that there is at least one active tracker that will match this link");var n=s(),t=u(n),r=g(e[0],n,t),l=e.is("a[data-lme-fulfil-offer]");if(o.log("matchedIndicies: ",r),0===r.length&&!l)return!1;var c=decodeURIComponent("javascript%3A%3B");e.data(a,e.attr("href")).attr("href",c).data(i,!0)}else e.is("input, button")&&e[0].form&&(o.log("Link is a form element"),e.data(a,"#lme-form-submit").data(i,!0));return!0},d=function(e){return!0===e.data(i)};e.exports={doLinkHijacking:f,undoLinkHijacking:function(e){if(o.log("function 'undoLinkHijacking' running"),!0!==e.data(i))return!0;if(e.is("a[data-lme-fulfil-offer]"))return o.log("link is rendered ad.  leave hijacked"),!1;if(o.log("link hijacked, resetting"),e.is("a")){o.log("Link is an anchor");var n=e.data(a);if(!n)return!1;e.data(a,null).attr("href",n).data(i,!1)}else e.is("input, button")&&e[0].form&&(o.log("Link is a form element"),e.data(a,null).data(i,!1));return!0},hijackLinks:function(){o.log("function 'hijackLinks' running");var e="[data-"+l+"]";o.log('selector "'+e+'"'),$(e).each(function(){f($(this))})},isHijacked:d,followPossiblyHijackedLink:function(e){o.log("function 'followPossiblyHijackedLink' running"),"#lme-form-submit"===e.data(a)?(o.log("Submitting form"),$(e[0].form).submit()):e.data(a)&&(o.log("redirecting URL"),window.location=d(e)?e.data(a):e.attr("href"))}}},function(e,n,t){var o=t(18),r=t(7).document,i=o(r)&&o(r.createElement);e.exports=function(e){return i?r.createElement(e):{}}},function(e,n,t){var o=t(7),r=t(11),i=t(12),a=t(24)("src"),l=Function.toString,c=(""+l).split("toString");t(5).inspectSource=function(e){return l.call(e)},(e.exports=function(e,n,t,l){var s="function"==typeof t;s&&(i(t,"name")||r(t,"name",n)),e[n]!==t&&(s&&(i(t,a)||r(t,a,e[n]?""+e[n]:c.join(String(n)))),e===o?e[n]=t:l?e[n]?e[n]=t:r(e,n,t):(delete e[n],r(e,n,t)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||l.call(this)})},function(e,n,t){var o=t(25),r=t(26),i=t(20),a=t(29),l=t(62);e.exports=function(e,n){var t=1==e,c=2==e,s=3==e,u=4==e,g=6==e,f=5==e||g,d=n||l;return function(n,l,m){for(var p,h,v=i(n),y=r(v),k=o(l,m,3),b=a(y.length),w=0,C=t?d(n,b):c?d(n,0):void 0;b>w;w++)if((f||w in y)&&(h=k(p=y[w],w,v),e))if(t)C[w]=h;else if(h)switch(e){case 3:return!0;case 5:return p;case 6:return w;case 2:C.push(p)}else if(u)return!1;return g?-1:s||u?u:C}}},function(e,n,t){var o=t(7),r=o["__core-js_shared__"]||(o["__core-js_shared__"]={});e.exports=function(e){return r[e]||(r[e]={})}},function(e,n,t){var o=t(3)("unscopables"),r=Array.prototype;void 0==r[o]&&t(11)(r,o,{}),e.exports=function(e){r[o][e]=!0}},function(e,n,t){var o=t(70),r=t(43);e.exports=Object.keys||function(e){return o(e,r)}},function(e,n,t){var o=t(26),r=t(28);e.exports=function(e){return o(r(e))}},function(e,n){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,n,t){var o=t(16).f,r=t(12),i=t(3)("toStringTag");e.exports=function(e,n,t){e&&!r(e=t?e:e.prototype,i)&&o(e,i,{configurable:!0,value:n})}},function(e,n,t){"use strict";n.decode=n.parse=t(93),n.encode=n.stringify=t(94)},function(e,n,t){"use strict";e.exports={landingPageTracking:"lme-landing-page-tracking",linkHijackComplete:"lme-link-hijack-complete",linkHijacking:"lme-link-hijack",linkHijackLocation:"lme-link-hijack-location",linkTargeting:"lme-tracking",linkTrackingCode:"lme-tracking-code",lmeRenderData:"lme-render-data",renderedRegions:"lme-regions-to-render"}},function(e,n,t){"use strict";var o=t(0)("lme"),r=function(){if(!(window.s&&window.s_tnt_lme&&window.ttMETA))return!1;var e=window.s_tnt_lme.split(","),n=window.ttMETA.findIndex(function(e){return null!==e.campaign.match(/\blme\b/i)});return!(-1===n||!e[n])&&e[n].split(":")};e.exports={getCampaignId:function(){o.log("function 'getCampaignId' running");var e=r();return!(!1===e||!e[0])&&e[0]},getAbTestId:function(){o.log("function 'getAbTestId' running");var e=r();return!(!1===e||!e[1])&&e[1]}}},function(e,n,t){"use strict";var o=t(0)("lme");e.exports=function(){return o.log("function 'getCurrPage' running"),window.mbox&&window.mbox.pageName?(o.log('satelite "mbox" object:'),o.log(window.mbox),window.mbox.pageName):window.s&&window.s.pageName?(o.log('satelite "s" object:'),o.log(window.s),window.s.pageName):(o.log("no mbox or satellite found page"),!1)}},function(e,n,t){"use strict";"use scrict";var o=t(0)("lme"),r=t(2).trigger,i=t(1),a=(i.landingPageTrackerLifespan,i.dataKeys),l=t(8),c=t(15);e.exports=function(e,n){if(o.log("in function 'renderBanner'"),!(window.bmo&&window.bmo.core&&window.bmo.core.onViewportResize))return o.log("bmo slider resize object missing.  cancel render banner."),r("bannerRenderIncomplete"),!1;var t=l(n);if(o.log({overridden:t}),t)return!1;o.log(n);var i=n.$target,s=n.offer;n.browserSessionId,n.channelId,n.offerId;if(o.log("$target: ",i),!(s&&s.cmsContent&&s.cmsContent.banner&&s.cmsContent.banner.altText&&s.cmsContent.banner.imgSrc&&s.cmsContent.banner.mobileSrc&&s.cmsContent.banner.mobileText&&s.cmsContent.banner.primaryCta&&s.cmsContent.banner.primaryCta.url&&s.cmsContent.banner.primaryCta.trackingCode&&!1!==i))return o.log("cms data lacks correct fields, no render"),r("bannerRenderIncomplete"),!1;var u=c(s.cmsContent.banner.primaryCta,n);return o.log("Banner Landing Page Tracking Info: ",u),s.cmsContent.banner.primaryCta.text=s.cmsContent.banner.primaryCta.text||"",o.log("altering $target html"),i.html(function(e){o.log('in function "bannerTemplate" with "banner": ',e);var n='\n    <div class="lme-generated">\n      <a\n        href="'+e.primaryCta.url+'"\n        class="fix-pos-abs"\n        data-lme-fulfil-offer\n        data-lme-link-hijack\n        data-lme-tracking-code="'+e.primaryCta.trackingCode+'"\n      >\n        <img\n          alt="'+e.altText+'"\n          data-src-desktop="'+e.imgSrc+'"\n          data-src-mobile="'+e.mobileSrc+'"\n          src="'+e.imgSrc+'"\n          class="carousel-slides-image-center fix-pos-abs"\n        >\n      </a>\n      <div class="carousel-below desktop-hide">\n        <h2>'+e.mobileText+'</h2>\n        <span class="break"></span>\n        <a\n          href="'+e.primaryCta.url+'"\n          class="button primary fix-pos-abs"\n          data-lme-fulfil-offer\n          data-lme-link-hijack\n          data-lme-tracking-code="'+e.primaryCta.trackingCode+'"\n        >\n          '+e.primaryCta.text+"\n        </a>\n      </div>\n    </div>\n  ";return o.log({html:n}),n}(s.cmsContent.banner)).data(a.lmeRenderData,n).find("[data-lme-fulfil-offer]").data(a.landingPageTracking,u),window.bmo.core.onViewportResize(),$(".bx-viewport").css("overflow","visible"),r("bannerRenderComplete",n),!0}},function(e,n,t){"use strict";var o=function(){return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,n){var t=[],o=!0,r=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(o=(a=l.next()).done)&&(t.push(a.value),!n||t.length!==n);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&l.return&&l.return()}finally{if(r)throw i}}return t}(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=t(0)("lme");e.exports=function(e){if("/"!==e[0])return!1;var n=/^(\/)(.*?)(\/)([gumyi]*)$/.exec(e),t=o(n,5),i=t[0],a=t[1],l=t[2],c=t[3],s=t[4];return r.log({str:e,wholeMatch:i,firstSlash:a,pattern:l,secondSlash:c,flags:s}),!!(i&&a&&l&&c)&&new RegExp(l,s||"")}},function(e,n,t){"use strict";"use scrict";var o=t(0)("lme"),r=t(2).trigger,i=t(1),a=(i.landingPageTrackerLifespan,i.dataKeys),l=t(8),c=t(15);e.exports=function(e,n){o.log("in function 'renderlogoutBigAd'");var t=l(n);if(o.log({overridden:t}),t)return!1;o.log(n);var i=n.$target,s=n.offer;n.browserSessionId,n.channelId,n.offerId;if(o.log("$target: ",i),!(s&&s.cmsContent&&s.cmsContent["logout-big-ad"]&&s.cmsContent["logout-big-ad"].altText&&s.cmsContent["logout-big-ad"].imgSrc&&s.cmsContent["logout-big-ad"].primaryCta&&s.cmsContent["logout-big-ad"].primaryCta.url&&s.cmsContent["logout-big-ad"].primaryCta.trackingCode&&!1!==i))return o.log("cms data lacks correct fields, no render"),r("logoutBigAdRenderIncomplete"),!1;var u=c(s.cmsContent["logout-big-ad"].primaryCta,n);return o.log("altering $target html"),i.html(function(e){o.log('in function "logoutBigAdTemplate" with "logoutBigAd": ',e);var n='\n    <div class="lme-generated">\n      <a\n        href="'+e.primaryCta.url+'"\n        data-lme-fulfil-offer\n        data-lme-link-hijack\n        data-lme-tracking-code="'+e.primaryCta.trackingCode+'"\n      >\n        <img alt="'+e.altText+'" src="'+e.imgSrc+'" />\n      </a>\n    </div>\n  ';return o.log({html:n}),n}(s.cmsContent["logout-big-ad"])).data(a.lmeRenderData,n).find("[data-lme-fulfil-offer]").data(a.landingPageTracking,u),r("logoutBigAdRenderComplete",n),!0}},function(e,n,t){"use strict";"use scrict";var o=t(0)("lme"),r=t(2).trigger,i=t(1),a=(i.landingPageTrackerLifespan,i.dataKeys),l=t(8),c=t(15);e.exports=function(e,n){o.log("in function 'renderlogoutSmallAd'");var t=l(n);if(o.log({overridden:t}),t)return!1;o.log(n);var i=n.$target,s=n.offer;n.browserSessionId,n.channelId,n.offerId;if(o.log("$target: ",i),!(s&&s.cmsContent&&s.cmsContent["logout-small-ad"]&&s.cmsContent["logout-small-ad"].altText&&s.cmsContent["logout-small-ad"].imgSrc&&s.cmsContent["logout-small-ad"].primaryCta&&s.cmsContent["logout-small-ad"].primaryCta.url&&s.cmsContent["logout-small-ad"].primaryCta.trackingCode&&!1!==i))return o.log("cms data lacks correct fields, no render"),r("logoutSmallAdRenderIncomplete"),!1;var u=c(s.cmsContent["logout-small-ad"].primaryCta,n);return o.log("altering $target html"),i.html(function(e){o.log('in function "logoutSmallAdTemplate" with "logoutSmallAd": ',e);var n='\n    <div class="lme-generated">\n      <a\n        href="'+e.primaryCta.url+'"\n        data-lme-fulfil-offer\n        data-lme-link-hijack\n        data-lme-tracking-code="'+e.primaryCta.trackingCode+'"\n      >\n        <img alt="'+e.altText+'" src="'+e.imgSrc+'" />\n      </a>\n    </div>\n  ';return o.log({html:n}),n}(s.cmsContent["logout-small-ad"])).data(a.lmeRenderData,n).find("[data-lme-fulfil-offer]").data(a.landingPageTracking,u),r("logoutSmallAdRenderComplete",n),!0}},function(e,n,t){"use strict";"use scrict";var o=t(0)("lme"),r=t(2).trigger,i=t(1),a=(i.landingPageTrackerLifespan,i.dataKeys),l=t(8),c=t(15);e.exports=function(e,n){o.log("in function 'renderSignIn'");var t=l(n);if(o.log({overridden:t}),t)return!1;o.log(n);var i=n.$target,s=n.offer;n.browserSessionId,n.channelId,n.offerId;if(o.log("$target: ",i),!(s&&s.cmsContent&&s.cmsContent["signin-ad"]&&s.cmsContent["signin-ad"].altText&&s.cmsContent["signin-ad"].imgSrc&&s.cmsContent["signin-ad"].primaryCta&&s.cmsContent["signin-ad"].primaryCta.url&&s.cmsContent["signin-ad"].primaryCta.trackingCode&&!1!==i))return o.log("cms data lacks correct fields, no render"),r("signinAdRenderIncomplete"),!1;var u=c(s.cmsContent["signin-ad"].primaryCta,n);return o.log("altering $target html"),i.html(function(e){o.log('in function "signInTemplate" with "signIn": ',e);var n='\n    <div class="lme-generated">\n      <a\n        href="'+e.primaryCta.url+'"\n        target="_blank"\n        data-lme-fulfil-offer\n        data-lme-tracking-code="'+e.primaryCta.trackingCode+'"\n      >\n        <img alt="'+e.altText+'" src="'+e.imgSrc+'" />\n      </a>\n    </div>\n  ';return o.log({html:n}),n}(s.cmsContent["signin-ad"])).data(a.lmeRenderData,n).find("[data-lme-fulfil-offer]").data(a.landingPageTracking,u),r("signinAdRenderComplete",n),!0}},function(e,n,t){"use strict";var o=t(0)("lme"),r=t(2).trigger,i=t(1),a=(i.landingPageTrackerLifespan,i.dataKeys),l=t(8),c=t(15);e.exports=function(e,n){o.log("in function 'renderWeightedBanner'");var t=window.weightedBannerMethods||{},i=t.getBannerSourceCode,s=t.smoothImageLoader,u=t.setBanner,g=l(n);if(o.log({overridden:g,bannerMethods:t}),o.log({getBannerSourceCode:i,smoothImageLoader:s,setBanner:u}),g)return!1;o.log(n);var f=n.$target,d=n.offer;n.browserSessionId,n.channelId,n.offerId;if(o.log("$target: ",f),!(d&&d.cmsContent&&d.cmsContent&&d.cmsContent["weighted-banner"]&&d.cmsContent["weighted-banner"].imgSrc&&d.cmsContent["weighted-banner"].mobileSrc&&d.cmsContent["weighted-banner"].primaryCta&&d.cmsContent["weighted-banner"].primaryCta.text&&d.cmsContent["weighted-banner"].primaryCta.url&&d.cmsContent["weighted-banner"].primaryCta.trackingCode&&i&&s&&u&&!1!==f))return o.log("cms data lacks correct fields, no render"),r("weightedBannerRenderIncomplete"),!1;var m=c(d.cmsContent["weighted-banner"].primaryCta,n);o.log("altering $target html");$("html").attr("lang");var p=d.cmsContent["weighted-banner"],h=p.imgSrc,v=p.mobileSrc,y={backgroundColor:d.cmsContent["weighted-banner"].baseThemeColor||"#000000",bannerImageLarge:h,bannerImageSmall:v,bannerTitle:p.heading,bannerCopy:p.subHeading,bannerCtaCopy:p.primaryCta.text,bannerCtaUrl:p.primaryCta.url,bannerCtaTarget:"_self",bannerClasses:"lme-generated",metaPrefix:"lme-generated",linkDataAttributes:{"lme-fulfil-offer":"","lme-link-hijack":"","lme-tracking-code":p.primaryCta.trackingCode}};return y.bannerSourceCode=i(y),s(y,function(){o.log("in smooth loader callback"),o.log("$target: ",f),o.log("data: ",n),o.log("lmeLandingPageTracking: ",m),o.log('$target.find("[data-lme-fulfil-offer]"): ',f.find("[data-lme-fulfil-offer]")),f.data(a.lmeRenderData,n).find("[data-lme-fulfil-offer]").data(a.landingPageTracking,m),o.log("triggering complete"),r("weightedBannerRenderComplete",n)}),!0}},function(e,n,t){"use strict";var o=t(0)("lme"),r=window.localStorage,i=t(1),a=i.localStorageKey,l=(i.dataKeys,t(34).unTrailingSlashIt),c=function(e){o.log("function 'getTestableDomLinkWithURL' running");var n=document.createElement("a");return n.classList.add("lme-test-link"),n.href=e,n.style.display="none",window.document.body.appendChild(n),n.href=n.href,n},s=function(e,n){return o.log("function 'linksMatch' running"),o.log("checking if "+e.href+" matches "+n.href),o.log("linkOne.protocol === linkTwo.protocol: ",e.protocol===n.protocol),o.log("unTrailingSlashIt(linkOne.pathname) === unTrailingSlashIt(linkTwo.pathname): ",l(e.pathname)===l(n.pathname)),o.log("linkOne.hostname === linkTwo.hostname: ",e.hostname===n.hostname),e.protocol.trim().toLowerCase()===n.protocol.trim().toLowerCase()&&l(e.pathname).trim().toLowerCase()===l(n.pathname).trim().toLowerCase()&&e.hostname.trim().toLowerCase()===n.hostname.trim().toLowerCase()},u=function(e){o.log("function 'urlMatchesLocation' running");window.location;var n=c(e);o.log("checking if "+e+" matches "+window.location.href);var t=s(n,window.location);return o.log(t?"it does!":"it does not!"),$(n).remove(),t},g=function(e,n){o.log("function 'textMatchesElement' running");var t=$(n);if(0===t.length)return!1;for(var r=t.contents().filter(function(){return this.nodeType===Node.TEXT_NODE}).text(),i=e.split("|"),a=[],l=0;l<i.length;l++)i[l].trim()&&a.push(i[l]);return a.some(function(e){return e.trim().toLowerCase()===r.trim().toLowerCase()})},f=function(e,n){o.log("function 'urlMatchesElement' running");var t=$(n);if(0===t.length||!t.attr("href"))return!1;for(var r=t.attr("href").trim().toLowerCase(),i=c(r),a=e.split("|"),l=[],u=0;u<a.length;u++)a[u].trim()&&l.push(a[u].trim().toLowerCase());return l.some(function(e){var n=c(e),t=s(n,i);return $(n).remove(),t})},d=function(e,n){return o.log("function 'cssMatchesElement' running"),$(n).is(e)};e.exports={getTestableDomLinkWithURL:c,linksMatch:s,urlMatchesLocation:u,textMatchesElement:g,urlMatchesElement:f,cssMatchesElement:d,getTrackers:function(){o.log("function 'getTrackers' running");var e=void 0,n=r.getItem(a);o.log("Info in function:"),o.log({storeString:n}),o.log("attempting JSON parse of trackers"),o.log(n);try{o.log("parsed the following JSON: "),e=JSON.parse(n)}catch(n){o.log("Error in JSON parsing:"),o.error(n),e=[]}return o.log(e),e},getTrackedIndicies:function(e){for(var n=[],t=0;t<e.length;t++){var r=e[t].trackingCode&&e[t].channelId&&e[t].browserSessionId&&e[t].offerId,i=e[t].textFilters||e[t].urlFilters||e[t].cssFilter,a=u(e[t].location);o.log("checking: trackerHasRequiredFields && trackerHasAFilter && trackerMatchesLocation:  "+r+" && "+i+" && "+a),r&&i&&a&&n.push(t)}return n},getElementMatchedIndicies:function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return o.log("function 'getElementMatchedIndicies' running",e),o.log("looking through trackers for a match"),t.forEach(function(t){var i=n[t];if(i.cssFilter){o.log("Checking cssFilter");var a=d(i.cssFilter,e);if(o.log(a),!1===a)return}if(i.textFilters){o.log("Checking textFilters");var l=g(i.textFilters,e);if(o.log(l),!1===l)return}if(i.urlFilters){o.log("Checking urlFilters");var c=f(i.urlFilters,e);if(o.log(c),!1===c)return}o.log("passes tests adding index "+t+" to matchedIndicies array"),r.push(t)}),o.log("checking if at top level or direct selector"),r}}},function(e,n,t){t(57),t(65),t(67),t(75),e.exports=t(92)},function(e,n,t){t(58),e.exports=t(5).Array.find},function(e,n,t){"use strict";var o=t(10),r=t(38)(5),i=!0;"find"in[]&&Array(1).find(function(){i=!1}),o(o.P+o.F*i,"Array",{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),t(40)("find")},function(e,n,t){e.exports=!t(19)&&!t(22)(function(){return 7!=Object.defineProperty(t(36)("div"),"a",{get:function(){return 7}}).a})},function(e,n,t){var o=t(18);e.exports=function(e,n){if(!o(e))return e;var t,r;if(n&&"function"==typeof(t=e.toString)&&!o(r=t.call(e)))return r;if("function"==typeof(t=e.valueOf)&&!o(r=t.call(e)))return r;if(!n&&"function"==typeof(t=e.toString)&&!o(r=t.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,n){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,n,t){var o=t(63);e.exports=function(e,n){return new(o(e))(n)}},function(e,n,t){var o=t(18),r=t(64),i=t(3)("species");e.exports=function(e){var n;return r(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!r(n.prototype)||(n=void 0),o(n)&&null===(n=n[i])&&(n=void 0)),void 0===n?Array:n}},function(e,n,t){var o=t(27);e.exports=Array.isArray||function(e){return"Array"==o(e)}},function(e,n,t){t(66),e.exports=t(5).Array.findIndex},function(e,n,t){"use strict";var o=t(10),r=t(38)(6),i="findIndex",a=!0;i in[]&&Array(1)[i](function(){a=!1}),o(o.P+o.F*a,"Array",{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),t(40)(i)},function(e,n,t){t(68),e.exports=t(5).Object.assign},function(e,n,t){var o=t(10);o(o.S+o.F,"Object",{assign:t(69)})},function(e,n,t){"use strict";var o=t(41),r=t(73),i=t(74),a=t(20),l=t(26),c=Object.assign;e.exports=!c||t(22)(function(){var e={},n={},t=Symbol(),o="abcdefghijklmnopqrst";return e[t]=7,o.split("").forEach(function(e){n[e]=e}),7!=c({},e)[t]||Object.keys(c({},n)).join("")!=o})?function(e,n){for(var t=a(e),c=arguments.length,s=1,u=r.f,g=i.f;c>s;)for(var f,d=l(arguments[s++]),m=u?o(d).concat(u(d)):o(d),p=m.length,h=0;p>h;)g.call(d,f=m[h++])&&(t[f]=d[f]);return t}:c},function(e,n,t){var o=t(12),r=t(42),i=t(71)(!1),a=t(31)("IE_PROTO");e.exports=function(e,n){var t,l=r(e),c=0,s=[];for(t in l)t!=a&&o(l,t)&&s.push(t);for(;n.length>c;)o(l,t=n[c++])&&(~i(s,t)||s.push(t));return s}},function(e,n,t){var o=t(42),r=t(29),i=t(72);e.exports=function(e){return function(n,t,a){var l,c=o(n),s=r(c.length),u=i(a,s);if(e&&t!=t){for(;s>u;)if((l=c[u++])!=l)return!0}else for(;s>u;u++)if((e||u in c)&&c[u]===t)return e||u||0;return!e&&-1}}},function(e,n,t){var o=t(30),r=Math.max,i=Math.min;e.exports=function(e,n){return(e=o(e))<0?r(e+n,0):i(e,n)}},function(e,n){n.f=Object.getOwnPropertySymbols},function(e,n){n.f={}.propertyIsEnumerable},function(e,n,t){t(76),t(85),e.exports=t(5).Array.from},function(e,n,t){"use strict";var o=t(77)(!0);t(78)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,n=this._t,t=this._i;return t>=n.length?{value:void 0,done:!0}:(e=o(n,t),this._i+=e.length,{value:e,done:!1})})},function(e,n,t){var o=t(30),r=t(28);e.exports=function(e){return function(n,t){var i,a,l=String(r(n)),c=o(t),s=l.length;return c<0||c>=s?e?"":void 0:(i=l.charCodeAt(c))<55296||i>56319||c+1===s||(a=l.charCodeAt(c+1))<56320||a>57343?e?l.charAt(c):i:e?l.slice(c,c+2):a-56320+(i-55296<<10)+65536}}},function(e,n,t){"use strict";var o=t(79),r=t(10),i=t(37),a=t(11),l=t(12),c=t(32),s=t(80),u=t(44),g=t(84),f=t(3)("iterator"),d=!([].keys&&"next"in[].keys()),m=function(){return this};e.exports=function(e,n,t,p,h,v,y){s(t,n,p);var k,b,w,C=function(e){if(!d&&e in E)return E[e];switch(e){case"keys":case"values":return function(){return new t(this,e)}}return function(){return new t(this,e)}},I=n+" Iterator",S="values"==h,x=!1,E=e.prototype,T=E[f]||E["@@iterator"]||h&&E[h],A=!d&&T||C(h),R=h?S?C("entries"):A:void 0,L="Array"==n&&E.entries||T;if(L&&(w=g(L.call(new e)))!==Object.prototype&&w.next&&(u(w,I,!0),o||l(w,f)||a(w,f,m)),S&&T&&"values"!==T.name&&(x=!0,A=function(){return T.call(this)}),o&&!y||!d&&!x&&E[f]||a(E,f,A),c[n]=A,c[I]=m,h)if(k={values:S?A:C("values"),keys:v?A:C("keys"),entries:R},y)for(b in k)b in E||i(E,b,k[b]);else r(r.P+r.F*(d||x),n,k);return k}},function(e,n){e.exports=!1},function(e,n,t){"use strict";var o=t(81),r=t(23),i=t(44),a={};t(11)(a,t(3)("iterator"),function(){return this}),e.exports=function(e,n,t){e.prototype=o(a,{next:r(1,t)}),i(e,n+" Iterator")}},function(e,n,t){var o=t(17),r=t(82),i=t(43),a=t(31)("IE_PROTO"),l=function(){},c=function(){var e,n=t(36)("iframe"),o=i.length;for(n.style.display="none",t(83).appendChild(n),n.src="javascript:",(e=n.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;o--;)delete c.prototype[i[o]];return c()};e.exports=Object.create||function(e,n){var t;return null!==e?(l.prototype=o(e),t=new l,l.prototype=null,t[a]=e):t=c(),void 0===n?t:r(t,n)}},function(e,n,t){var o=t(16),r=t(17),i=t(41);e.exports=t(19)?Object.defineProperties:function(e,n){r(e);for(var t,a=i(n),l=a.length,c=0;l>c;)o.f(e,t=a[c++],n[t]);return e}},function(e,n,t){var o=t(7).document;e.exports=o&&o.documentElement},function(e,n,t){var o=t(12),r=t(20),i=t(31)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),o(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,n,t){"use strict";var o=t(25),r=t(10),i=t(20),a=t(86),l=t(87),c=t(29),s=t(88),u=t(89);r(r.S+r.F*!t(91)(function(e){Array.from(e)}),"Array",{from:function(e){var n,t,r,g,f=i(e),d="function"==typeof this?this:Array,m=arguments.length,p=m>1?arguments[1]:void 0,h=void 0!==p,v=0,y=u(f);if(h&&(p=o(p,m>2?arguments[2]:void 0,2)),void 0==y||d==Array&&l(y))for(t=new d(n=c(f.length));n>v;v++)s(t,v,h?p(f[v],v):f[v]);else for(g=y.call(f),t=new d;!(r=g.next()).done;v++)s(t,v,h?a(g,p,[r.value,v],!0):r.value);return t.length=v,t}})},function(e,n,t){var o=t(17);e.exports=function(e,n,t,r){try{return r?n(o(t)[0],t[1]):n(t)}catch(n){var i=e.return;throw void 0!==i&&o(i.call(e)),n}}},function(e,n,t){var o=t(32),r=t(3)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||i[r]===e)}},function(e,n,t){"use strict";var o=t(16),r=t(23);e.exports=function(e,n,t){n in e?o.f(e,n,r(0,t)):e[n]=t}},function(e,n,t){var o=t(90),r=t(3)("iterator"),i=t(32);e.exports=t(5).getIteratorMethod=function(e){if(void 0!=e)return e[r]||e["@@iterator"]||i[o(e)]}},function(e,n,t){var o=t(27),r=t(3)("toStringTag"),i="Arguments"==o(function(){return arguments}());e.exports=function(e){var n,t,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(t=function(e,n){try{return e[n]}catch(e){}}(n=Object(e),r))?t:i?o(n):"Object"==(a=o(n))&&"function"==typeof n.callee?"Arguments":a}},function(e,n,t){var o=t(3)("iterator"),r=!1;try{var i=[7][o]();i.return=function(){r=!0},Array.from(i,function(){throw 2})}catch(e){}e.exports=function(e,n){if(!n&&!r)return!1;var t=!1;try{var i=[7],a=i[o]();a.next=function(){return{done:t=!0}},i[o]=function(){return a},e(i)}catch(e){}return t}},function(e,n,t){"use strict";var o="1.2.2018.03.22@17_35_35",r=t(45),i=t(1),a=t(4),l=t(0)("lme"),c=(i.apiBase,i.eventNamespace,i.apiTimeout,t(21)),s=t(2),u=s.events,g=s.trigger,f=s.listen,d=t(6),m=(d.endpoints,d.getEndpointURL,d.getEndpointHeaders,t(97)),p=(t(33),t(48)),h=t(99),v=(t(9),t(101)),y=t(102),k=t(103),b=t(104),w=t(106),C=(t(107),t(14).doSessionExtend),I=t(108),S=t(109),x=t(35).hijackLinks,E=t(8),T=t(13),A=T.getLocalStorageItem,R=T.setLocalStorageItem,L=function(){l.log("function 'doLmeInit' running"),window.lme={};var e=a.get("dar"),n=(a.get("aam_lme"),$("body").data("lme-ready"));if(O(),n)l.log("init fired after already ready.  stopping execution");else{if(!e)return l.log("dar cookie not set properly. stopping execution"),void g("noRenderRegions",{reason:"dar cookie not set properly. stopping execution"});f("requestOffers",v),f("offersRecieved",y),f("segmentChanged",S),f("sessionExtend",C),w(),x(),b(),I(),window.lme.events=u,u.forEach(function(e){f(e,function(n,t){l.log('Event "'+e+'" triggered with data: ',t)})}),window.lme.regions={},Object.keys(c).forEach(function(e){var n=c[e];window.lme.regions[e]={slug:e,name:n,renders:[]},f(n+"Render",function(t,o){l.log('Event "'+n+'Render" triggered with data: ',o),window.lme.regions[e].renders.push({event:t,data:o}),o.originalRenderEvent=t,g("lmeRegionRender",o)}),f(n+"RenderComplete",function(e,t){l.log('Event "'+n+'RenderComplete" triggered with data: ',t),t.originalRenderEvent=e,g("lmeRegionRenderComplete",t),x()}),f(n+"RenderIncomplete",function(e,t){l.log('Event "'+n+'RenderIncomplete" triggered with data: ',t),t.originalRenderEvent=e,g("lmeRegionRenderIncomplete",t)}),f(n+"RenderNoTarget",function(e,t){l.log('Event "'+n+'RenderNoTarget" triggered with data: ',t),t.originalRenderEvent=e,g("lmeRegionRenderNoTarget",t)}),f(n+"Render",m[e]),f(n+"RenderComplete",k),window.lme.regions[e].defaultTimeout=setTimeout(function(){l.log("checking "+n+"RenderDefault to see if it should fire"),window.lme.regions[e].renders.length||g(n+"RenderDefault")},i.renderDefaultTimeout)}),f("sampleAdobeRequest",function(){h()}),$("body").data("lme-ready",!0),g("lmeReady")}};jQuery(document).ready(function(e){l.log("function 'document.ready' running"),L()});var _=function(){$("body").append('\n    <div class="lme-demo-buttons">\n      <button type="button" class="success button trigger" data-lme-trigger-region="banner" data-lme-trigger-position="1">Trigger Banner 1</button>\n      <button type="button" class="success button trigger" data-lme-trigger-region="banner" data-lme-trigger-position="2">Trigger Banner 2</button>\n      <button type="button" class="success button trigger" data-lme-trigger-region="hp-ad" data-lme-trigger-position="1">Trigger Homepage Ad</button>\n      <button type="button" class="success button load-cookies">Load Cookies</button>\n    </div>\n  ')},O=function(){l.log("function 'demoMethods' running"),$("body").on("click",".trigger",function(e){var n=$(this).data("lme-trigger-region"),t=$(this).data("lme-trigger-position");g("requestOffers",{config:{limit:3,lmeRequests:[{region:n,position:t,index:0},{region:["banner","hp-ad"],position:{banner:1,"hp-ad":2},priority:["/MTG_/","/MTG\\*_/gi","CUST_ESTMNT_1"]}]}})}).on("click",".load-cookies",function(e){a.set("aam_lme","something"),a.set("dar","646d9bd59d62d18f2d150581b7c5dcfd16fedbeb")}),f("addDemoButtons",_),window.lme.version=o,l.log("Running LME JS library v"+o),window.lme.helpers={cookie:a,nextTracker:function(){var e=A(i.localStorageKey),n=e[e.findIndex(function(e){return void 0===e.complete})];window.location=n.location},completeTracker:function(){var e=A(i.localStorageKey);e[e.findIndex(function(e){return void 0===e.complete})].complete=!0,R(i.localStorageKey,e)},trackerLog:function(){var e=A(i.localStorageKey),n=e[e.findIndex(function(e){return void 0===e.complete})];return l.log(n),n},allTrackers:function(){return A(i.localStorageKey)},enableDebug:function(){R("__debug__enabled__",["lme"])},reHijackLinks:function(){x()},addCookies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"d0de724172ceea8ff52636f229e516fa94405202";a.set("dar",e)},setApiBase:function(e){R(i.localStorageApiBaseOverrideKey,e,!1)},setApiTimeout:function(e){R(i.localStorageApiTimeoutOverrideKey,e,!1)},setRenderDefaultTimeout:function(e){R(i.localStorageRenderDefaultOverrideKey,e,!1)},doSampleAdobeRequest:function(e){g("sampleAdobeRequest")},parseQuerystringForLmeFragments:function(){l.log("function 'parseQuerystringForLmeFragments' running");var e=this,n=r.parse(window.location.search.substr(1));l.log("querystring params: ",n),n.lme_dar&&(l.log("setting dar to query param: "+n.lme_dar),a.set("dar",n.lme_dar)),void 0!==n.lme_enable_debug&&(l.log("enabling debug mode from query param"),this.enableDebug()),n.lme_api_base&&(l.log("setting API base to query param: "+n.lme_api_base),this.setApiBase(decodeURIComponent(n.lme_api_base))),n.lme_api_timeout&&(l.log("setting API timeout to query param: "+n.lme_api_timeout),this.setApiTimeout(decodeURIComponent(n.lme_api_timeout))),n.lme_default_timeout&&(l.log("setting Render Default timeout to query param: "+n.lme_default_timeout),this.setRenderDefaultTimeout(decodeURIComponent(n.lme_default_timeout))),void 0!==n.emulate_target&&(l.log("emulating adobe target. ensure that current page has a name"),p()||(window.mbox?window.mbox.pageName=n.emulate_target||"BMO:PERS":window.mbox={pageName:n.emulate_target||"BMO:PERS"}),f("lmeReady",function(n){l.log("emulating adobe target. running after ready"),e.doSampleAdobeRequest()},!0))},querystring:r,isRenderOverridden:E},l.log("parsing for query param"),window.lme.helpers.parseQuerystringForLmeFragments()}},function(e,n,t){"use strict";function o(e,n){return Object.prototype.hasOwnProperty.call(e,n)}e.exports=function(e,n,t,i){n=n||"&",t=t||"=";var a={};if("string"!=typeof e||0===e.length)return a;var l=/\+/g;e=e.split(n);var c=1e3;i&&"number"==typeof i.maxKeys&&(c=i.maxKeys);var s=e.length;c>0&&s>c&&(s=c);for(var u=0;u<s;++u){var g,f,d,m,p=e[u].replace(l,"%20"),h=p.indexOf(t);h>=0?(g=p.substr(0,h),f=p.substr(h+1)):(g=p,f=""),d=decodeURIComponent(g),m=decodeURIComponent(f),o(a,d)?r(a[d])?a[d].push(m):a[d]=[a[d],m]:a[d]=m}return a};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,n,t){"use strict";var o=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,n,t,l){return n=n||"&",t=t||"=",null===e&&(e=void 0),"object"==typeof e?i(a(e),function(a){var l=encodeURIComponent(o(a))+t;return r(e[a])?i(e[a],function(e){return l+encodeURIComponent(o(e))}).join(n):l+encodeURIComponent(o(e[a]))}).join(n):l?encodeURIComponent(o(l))+t+encodeURIComponent(o(e)):""};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,n){if(e.map)return e.map(n);for(var t=[],o=0;o<e.length;o++)t.push(n(e[o],o));return t}var a=Object.keys||function(e){var n=[];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n}},function(e,n,t){"use strict";var o=t(0)("lme"),r={prod:/^www\.bmo\.com$/i};e.exports={domainPatterns:r,getEnvType:function(){return o.log("function 'getEnvType' running"),window.location.hostname.match(r.prod)?"prod":"notProd"}}},function(e,n,t){var o;o=function(){return{getItem:function(e){return e&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,n,t,o,r,i){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var a="";if(t)switch(t.constructor){case Number:a=t===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+t;break;case String:a="; expires="+t;break;case Date:a="; expires="+t.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(n)+a+(r?"; domain="+r:"")+(o?"; path="+o:"")+(i?"; secure":""),!0},removeItem:function(e,n,t){return!!this.hasItem(e)&&(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(t?"; domain="+t:"")+(n?"; path="+n:""),!0)},hasItem:function(e){return!!e&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),n=e.length,t=0;t<n;t++)e[t]=decodeURIComponent(e[t]);return e}}},e.exports=o()},function(e,n,t){"use strict";var o=t(21),r={};Object.keys(o).forEach(function(e){var n,i=t(98)("./render"+((n=o[e]).charAt(0).toUpperCase()+n.slice(1)));r[e]=i}),e.exports=r},function(e,n,t){var o={"./renderBanner":49,"./renderBanner.js":49,"./renderLogoutBigAd":51,"./renderLogoutBigAd.js":51,"./renderLogoutSmallAd":52,"./renderLogoutSmallAd.js":52,"./renderSigninAd":53,"./renderSigninAd.js":53,"./renderWeightedBanner":54,"./renderWeightedBanner.js":54};function r(e){return t(i(e))}function i(e){var n=o[e];if(!(n+1))throw new Error("Cannot find module '"+e+"'.");return n}r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=98},function(e,n,t){"use strict";var o=$("body");e.exports=function(){o.trigger("requestOffers",{config:{limit:5,lmeRequests:[{region:["banner"],offerLocking:!0},{region:["signin-ad"],offerLocking:!0},{region:["logout-big-ad"],offerLocking:!0},{region:["logout-small-ad"],offerLocking:!0},{region:["weighted-banner"],offerLocking:!0}]}})}},function(e,n,t){"use strict";var o=t(0)("lme"),r=t(1);t(4);e.exports=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.segmentCookieMaxLength;if(o.log("function 'trimCookie' running"),encodeURIComponent(e).length<=n)return e;o.log("Trimming the cookie to be "+n+" char length");for(var t=(e=e.replace("seg=","")).split(","),i="seg=",a=void 0,l=0;l<t.length&&(a=i+(0===l?"":",")+t[l],encodeURIComponent(a).length<n);l++)i=a;return i}},function(e,n,t){"use strict";var o=t(0)("lme"),r=t(9),i=t(6).endpoints,a=t(2),l=(a.events,a.trigger);a.listen;e.exports=function(e,n){o.log("function 'doRequestOffers' running with data: ",n);var t=n.config;if(t.lmeRequests&&t.lmeRequests.length){var a={lmeRequests:t.lmeRequests},c=i.offers.customer;"limit"in t&&(c.params.maxOffers=t.limit),r(c,{},function(e,n,t){e=JSON.parse(e.replace(/\n/gi,"")),o.log("API call succcess:"),o.log({apiData:e,textStatus:n,jqXHR:t});var r={apiData:e,targetData:a};$("body").data("lme-requested-offers",r),l("offersRecieved",r)},function(e,n,t){o.log("API call fail")},function(){o.log("API call finished"),l("sessionExtend")})}}},function(e,n,t){"use strict";function o(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}var r=t(0)("lme"),i=t(21),a=t(2),l=(a.events,a.trigger),c=(a.listen,t(14).getCurrentBrowserSessionId),s=t(50),u=t(33),g=(t(1),t(4),function(e,n){return void 0===n?1:n[e]||1});e.exports=function(e,n){r.log("function 'parseRequestOffers' running");var t=n.targetData,a=n.apiData.offerList,f=[];return r.log("Parsing data:"),r.log({data:n}),t.lmeRequests&&t.lmeRequests.length&&!t.lmeRequests.some(function(e){return!("region"in e)})?a&&a.length&&a.some(function(e){return e.cmsContent||!e.cmsContent.length||Object.keys(e.cmsContent).some(function(e){return!("type"in e&&"imgSrc"in e&&"altText"in e&&"mobileSrc"in e&&"mobileText"in e&&"heading"in e&&"subHeading"in e&&"copy"in e&&"primaryCta"in e&&"secondaryCta"in e)})})?(t.lmeRequests.forEach(function(e){var n=e.region,t=e.position,i=e.priority,l=(e.override,e.offerLocking),d="string"==typeof n?[n]:[].concat(o(n)),m=c(),p=u(),h=!1,v=!1,y=null;return r.log("Looking for offers to match:"),r.log({req:e,offers:a}),i&&i.length&&(r.log("priority exists:"),r.log({priority:i}),h=i.some(function(e){var n=s(e);return r.log('looking for offers to match pattern: "'+e+'":'),-1!==(v=a.findIndex(function(o){if(o.locked)return!1;var i=o.solutionCode,a=o.cmsContent;if(!a||!Object.keys(a).length)return!1;var l=Object.keys(a),c=!1,s=1;return n?(r.log('regex matching against "'+i+'"'),c=i.match(n)):(r.log('string matching against "'+i+'"'),c=e.toLowerCase()===i.toLowerCase()),c?(r.log("matched to offer:"),r.log({offer:o}),r.log("checking if matched offer has a matching region, position and dom node:"),!!d.find(function(e){return r.log('checking region "'+e+'" against:'),r.log(l),r.log(l.some(function(n){return n===e})),!!l.some(function(n){return n===e})&&(r.log('found region "'+e+'":'),s=g(e,t),r.log('checking position "'+s+'":'),y=$('[data-lme-region="'+e+'"][data-lme-position="'+s+'"]'),r.log('region "'+e+'" and position "'+s+'" match '+y.length+" dom node"+(1===y.length?"":"s")),y.length)})&&!!y.length):(r.log("no match"),!1)}))})),h?(r.log("Adding matched offer "),f.push({$target:y,offer:a[v],req:e,offerId:a[v].offerId,browserSessionId:m,channelId:p}),l&&(a[v].locked=!0,a[v].lockedBy=e),!0):(r.log("no priority matches, looking for region matches"),(h=-1!==(v=a.findIndex(function(e){if(r.log("checking offer:",e),e.locked)return!1;r.log("offer not yet locked");var n=e.cmsContent;if(!n||!Object.keys(n).length)return!1;var o=Object.keys(e.cmsContent),i=1;return!!d.find(function(e){return r.log('looking for region "'+e+'": '),!!o.some(function(n){return n===e})&&(r.log('found region "'+e+'": '),i=g(e,t),r.log('looking for position "'+i+'": '),y=$('[data-lme-region="'+e+'"][data-lme-position="'+i+'"]'),r.log('region "'+e+'" and position "'+i+'" match '+y.length+" dom node"+(1===y.length?"":"s")+":",y),y.length)})&&!!y.length})))?(f.push({$target:y,offer:a[v],req:e,offerId:a[v].offerId,browserSessionId:m,channelId:p}),l&&(a[v].locked=!0,a[v].lockedBy=e),!0):void 0)}),void(f.length?(r.log("we have "+f.length+" regions to render and they are:"),r.log(f),$("body").data("lme-regions-to-render",f),f.forEach(function(e){r.log("Looking for match for region to render"),r.log(e),"string"==typeof e.req.region&&(e.req.region=[e.req.region]),[].concat(o(e.req.region)).forEach(function(n){r.log('get the $target for the "'+n+'" again explicitly and set data on it');var t=g(e.req.region,e.req.position),o=$('[data-lme-region="'+n+'"][data-lme-position="'+t+'"]');r.log('found $target for "'+n+'"',o),o.length&&(e.$target=o,o.data("lme-render-data",e),l(i[n]+"Render",e))})})):($("body").data("lme-regions-to-render",!1),l("noRenderRegions",{reason:"Target request matches no offers."})))):(l("noRenderRegions",{reason:"CMS data in API response not set properly. Attached as property `offerList` in this event.",offerList:a}),!1):(l("noRenderRegions",{reason:"Target request set properly"}),!1)}},function(e,n,t){"use strict";var o=t(0)("lme"),r=t(9),i=t(47).getAbTestId,a=t(6).endpoints,l=t(1).dataKeys,c=t(2),s=(c.events,c.trigger,c.listen,t(14).getCurrentBrowserSessionId);e.exports=function(e,n){o.log("function 'doAcknowledgeOffer' running"),o.log(e),o.log(n),o.log('getting "'+l.renderedRegions+'" data from body:');var t=s(),c=n.$target,u=(n.req,n.offer),g=$("body").data(l.renderedRegions),f=c.data(l.lmeRenderData),d=u.offerId,m=g.findIndex(function(e){return!e.acknowledgeable&&e.offer.offerId===d});if(o.log(g),o.log('looking for non "acknowledgeable" region with current "offerId" to acknowledge: ',m,g[m]),m>-1&&(o.log('setting "acknowleged" prop on index '+m),g[m].acknowledgeable=!0),o.log("checking if all regions to render have rendered..."),g.every(function(e){return e.acknowledgeable})){o.log("They have!  prep the API call");var p=[],h=i();if(o.log("checking if abTestId is exist"),!1===h)return;for(var v=0;v<g.length;v++)o.log("pushing into offerID array: ",g[v]),!0!==g[v].acknowleged&&g[v].browserSessionId===t&&(g[v].acknowleged=!0,p.push({offerId:g[v].offer.offerId,abTestId:h}));o.log("making API call for acknowledge endpoint"),a.offers.acknowledge.headers["X-BROWSER-SESSION-ID"]=f.browserSessionId,p.length>0&&r(a.offers.acknowledge,{offers:p},function(e,n,t){o.log("Acknowledge API call succcess:")},function(e,n,t){o.log("Acknowledge API call fail")},function(){o.log("Acknowledge API call finished")})}else o.log("They have not!  set the altered data back on the body element and stop the fn");$("body").data(l.renderedRegions,g)}},function(e,n,t){"use strict";window.localStorage;var o=t(0)("lme"),r=t(9),i=t(6).endpoints,a=t(1).localStorageKey,l=t(13).addTrackerToStorageArray,c=t(35),s=c.isHijacked,u=c.followPossiblyHijackedLink,g=t(105);e.exports=function(){o.log("function 'ctaClickListener' running"),$("body").on("click","a[data-lme-fulfil-offer]",function(e){o.log("Region Click function running.  let's get the data from the dom");var n=$(this),t="[data-lme-region][data-lme-position]",c=g(n[0])||s(n),f=void 0;if(o.log("eventShouldBeInterrupted: ",c),c&&(o.log("preventing default and stopping propagation"),e.preventDefault(),e.stopImmediatePropagation()),f=n.is(t)?n:n.parent().is(t)?n.parent():n.parentsUntil(t).last().parent(),o.log("$dataTarget: ",f),f.length){var d=f.data("lme-render-data");if(o.log("renderData: ",d),Object.keys(d).length){var m=d.offer.offerId,p=n.data("lme-tracking-code"),h={offers:[{offerId:m,offerLifeCycleStatusType:p}]};if(m&&p)return o.log("Calling API for fulfil with data:",h),r(i.offers.fulfil,h,function(e,t,r){o.log("Fulfil API call succcess, adding tracker to storage array"),l(n,a)},function(e,n,t){o.log("Fulfil API call fail"),o.log({jqXHR:e,textStatus:n,errorThrown:t})},function(){o.log("Fulfil API call finished"),c&&(o.log("ready to redirect"),u(n))}),!c&&void 0}}})}},function(e,n,t){"use strict";var o=t(0)("lme");e.exports=function(e){o.log("function 'linkWillUnloadDocument' running");var n=e.target;return o.log("current target "+n),""===n||!n||"_self"===n.toLowerCase()||"_parent"===n.toLowerCase()||"_top"===n.toLowerCase()}},function(e,n,t){"use strict";var o=window.localStorage,r=t(0)("lme"),i=t(6).endpoints,a=(t(34).unTrailingSlashIt,t(9)),l=t(1),c=l.localStorageKey,s=l.dataKeys,u=t(13).setLocalStorageItem,g=t(35),f=g.isHijacked,d=g.followPossiblyHijackedLink,m=g.undoLinkHijacking,p="[data-"+s.linkTargeting+"], [data-"+s.linkTrackingCode+"], [data-"+s.linkHijacking+"]",h=t(55),v=h.getTestableDomLinkWithURL,y=(h.linksMatch,h.urlMatchesLocation,h.textMatchesElement,h.urlMatchesElement,h.cssMatchesElement,h.getTrackers),k=h.getTrackedIndicies,b=h.getElementMatchedIndicies,w=void 0;e.exports=function(){r.log("function 'doLandingPageTracking' running");var e=o.getItem("lmeLandingPageTracking"),n=$("body"),t=[],l=[];r.log("Info in function:"),r.log({storeString:e});var s=function(e,n){return e=e.map(function(e){if(e!==n)return e>n?e-1:e}).filter(function(e){return void 0!==e})};r.log("getting garbage collected trackers"),w=function(e){if(r.log("function 'getGarbageCollectedTrackers' running"),!Array.isArray(e))return[];for(var n=[],t=(new Date).getTime(),o=0;o<e.length;o++)t>=(parseInt(e[o].expires)||0)&&n.push(o);for(var i=n.length-1;i>=0;i--)e.splice(n[i],1);return r.log("Returning garbage collected trackers: ",e),e}(y()),r.log("trackers: ",w);var g=function(e){r.log('in function "doClickProcessing" checking if element matches tracking patterns:'),r.log("event.defaultPrevented: ",e.defaultPrevented),r.log(this);var n=$(this),o=e.currentTarget===e.delegateTarget,g=$(e.delegateTarget).is("body"),h=g&&$(e.currentTarget).is(p);if(r.log("This "+(o?"is":"is NOT")+" a direct Target"),r.log("This "+(g?"is":"is NOT")+" a body Target"),h&&r.log("body event hitting direct target"),l.concat(b(this,w,t,l)),n.is(p)&&f(n)&&0===l.length&&(r.log("in a hijacked link with no match.  reset the link."),m(n)))r.log('Hijack undo successful. Exit "doClickProcessing" function.');else if(n.parent().is("body")||n.is(p))if(r.log("at top level or direct selector look at matches"),r.log(l),r.log("filter for uniques"),l=l.filter(function(e,n,t){return t.indexOf(e)===n}),r.log("new unique array"),r.log(l),l.length){r.log("at this point we have at least one match lets make API calls"),r.log(l);var y={};l.forEach(function(e){var n=w[e],t=n.browserSessionId,o=n.offerId,r=n.trackingCode,i=n.channelId;t in y?y[t].push({dataForAPI:{offerId:o,offerLifeCycleStatusType:r},config:{channelId:i}}):y[t]=[{dataForAPI:{offerId:o,offerLifeCycleStatusType:r},config:{channelId:i,index:e}}]}),Object.keys(y).forEach(function(o){var g=y[o],m={offers:[]};g.forEach(function(e){m.offers.push(e.dataForAPI)}),i.offers.fulfil.headers["X-BROWSER-SESSION-ID"]=o,i.offers.fulfil.headers["X-LME-CHANNEL-ID"]=g[0].config.channelId,i.offers.fulfil.headers["X-LME-SESSION-CHANNEL-ID"]=g[0].config.channelId,r.log("Check if data attribute set specifically to await for ajax");var p=n,h=p.is("a")&&v(p.attr("href")).hostname.trim().toLowerCase()===window.location.hostname.trim().toLowerCase(),k=f(p),b=h||k;if(r.log("eventShouldBeInterrupted: "+b),a(i.offers.fulfil,m,function(e,n,o){var i;r.log("Fulfil API call succcess:"),i=g[0].config.index,r.log('in function "removeTrackerByIndex" removing '+i),void 0!==w[i]&&(w.splice(i,1),t=s(t,i),l=s(l,i)),u(c,w)},function(e,n,t){r.log("Fulfil API call fail"),r.log({jqXHR:e,textStatus:n,errorThrown:t})},function(e,n,t){r.log("Fulfil API call finished"),b&&(r.log("redirecting user to after api success"),d(p)),l=[]}),b)return e.preventDefault(),e.stopImmediatePropagation(),!1})}else f(n)&&(r.log("no matched indicies reset link to pre hijacked state "),r.log(n),m(n));else r.log("Not at top level or direct")};(t=k(w)).length||$(p).length?(r.log("at this point we have at least one tracker or direct targeted element for this page."),r.log(t),n.on("click","*",g),$(p).on("click",g)):r.log("No trackers active"),r.log("setting garbage collected trackers back in local storage"),u(c,w)}},function(e,n,t){"use strict";var o=t(0)("lme");e.exports=function(){o.log("function 'ctaClickListener' running"),$("body").on("click","a[data-lme-fulfil-offer]",function(e){o.log("Region Click function running"),e.preventDefault();var n=$(this).data("lme-fulfil-offer").trackingCode;trigger("fulfilOffer",{trackingCode:n})})}},function(e,n,t){"use strict";var o=t(0)("lme"),r=(t(1),t(4)),i=t(2).trigger;e.exports=function(e,n){o.log("function 'doSegmentChangeCheck' running");var t=r.get("aam_seg"),a=r.get("aam_lme"),l=r.get("aam_lme_cur");$("[data-lme-region]").length||!t&&!a||(!t&&a?(t=a,r.set("aam_seg",a)):t&&!a&&(a=t,r.set("aam_lme",t)),a&&!l&&(l=a,r.set("aam_lme_cur",a)),l!==a&&i("segmentChanged",{lmeSegment:a}))}},function(e,n,t){"use strict";var o=t(0)("lme"),r=(t(1),t(4)),i=t(9),a=t(6).endpoints;e.exports=function(e,n){o.log("function 'doSegmentUpdate' running"),r.set("aam_lme_cur",r.get("aam_lme")),i(a.offers.segmentUpdate,{},function(e,n,t){o.log("Segment update API call succcess:")},function(e,n,t){o.log("Segment update API call fail"),o.log({jqXHR:e,textStatus:n,errorThrown:t})},function(){o.log("Segment update API call finished")})}}]);